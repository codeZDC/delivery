jQuery(function($){

	//监听show事件
	$('#myTab a[data-toggle="tab"]').on('show.bs.tab', function (e) {
//		console.log(e);
//		var currentTab = $(e.target).data('target');
//		if(currentTab == 'write') {
//		Inbox.show_form();
//		}
//		else if(currentTab == 'inbox') {
//		Inbox.show_list();
//		}
	})

	//更改页面头名字
	var typeName = $("#headerTitle").html();
	$("#headerTitle").html(templateName[typeName]);

	//初始化下拉菜单的选项
	$("select").each(function(){
		var select = $(this);
		if(select.attr('type')){//如果有type这个属性
			var options = dropArr[select.attr('type')];
			for(var i in options ){
				select.append("<option value='"+ options[i] +"'>"+ options[i] +"</option>");


			}

			//给自定义按钮添加事件
			select.on('change',function(){
				if(select.val() == '自定义'){
					//把旁边的input按钮显示出来
					select.next().removeClass('hide');

				}else{
					var input = select.next();
					input.addClass('hide');
					//清空input的值
					input.val('');
				}
			});
		}
	});

	//添加鼠标上移弹出提示功能
	$('[data-rel=popover]').popover({container:'body'});
	
	
	//文件上传	控件

	$('#shpFile').ace_file_input({
		style:'well',
		btn_choose:'点这里选择文件  或者拖放文件到这里 只接受.shp文件',
		btn_change:null,
		no_icon:'ace-icon fa fa-cloud-upload',
		droppable:true,
	//	maxSize: 110000,//文件允许的最大值 bytes
		allowExt: ["shp"],//允许的后缀名
		//allowMime: ["image/jpg", "image/jpeg", "image/png", "image/gif"],
		thumbnail:'small'//large | fit
			//,icon_remove:null//set null, to hide remove/reset button
			/**,before_change:function(files, dropped) {
			//Check an example below
			//or examples/file-upload.html
			return true;
		}*/
			/**,before_remove : function() {
			return true;
		}*/
			,
			preview_error : function(filename, error_code) {
				//name of the file that failed
				//error_code values
				//1 = 'FILE_LOAD_FAILED',
				//2 = 'IMAGE_LOAD_FAILED',
				//3 = 'THUMBNAIL_FAILED'
				//alert(error_code);
			}

	}).on('change', function(){
		//console.log($(this).data('ace_input_files'));
		//console.log($(this).data('ace_input_method'));
	}).on('file.error.ace',function(ev, info){
		if(info.error_count['ext']) alert('文件格式不允许，请选择一个.shp文件');
		//if(info.error_count['size']) alert('文件过大，超过了 100KB');
	});
	
	$('#qualityFile').ace_file_input({
		style:'well',
		btn_choose:'点这里选择文件  或者拖放文件到这里 只接受.png或者jpg文件',
		btn_change:null,
		no_icon:'ace-icon fa fa-cloud-upload',
		droppable:true,
	//	maxSize: 110000,//文件允许的最大值 bytes
		allowExt: ["png","jpg"],//允许的后缀名
		allowMime: ["image/jpg", "image/jpeg", "image/png", "image/gif"],
		thumbnail:'small'//large | fit
			,
			preview_error : function(filename, error_code) {
				//name of the file that failed
				//error_code values
				//1 = 'FILE_LOAD_FAILED',
				//2 = 'IMAGE_LOAD_FAILED',
				//3 = 'THUMBNAIL_FAILED'
				//alert(error_code);
			}

	}).on('change', function(){
		//console.log($(this).data('ace_input_files'));
		//console.log($(this).data('ace_input_method'));
	}).on('file.error.ace',function(ev, info){
		if(info.error_count['ext'] || info.error_count['mime']) alert('文件格式不允许，请选择一个允许的图片,png或者jpg');
		//if(info.error_count['size']) alert('文件过大，超过了 100KB');
	});
});