/**
 * codeZ
 * 省市县相关js   汇交区域delivery 行政区域administration
 */
var contextPath = parent.$('#contextPath').val();

//省级下拉变更,更新市级(县级)
$('.province').change(function(){
	//清空市级城市信息
	var citySelect = $(this).next();
	citySelect.next().find('option:not(.no)').remove();//区县信息
	citySelect.find('option:not(.no)').remove();
	//省外单位和没有选择的情况下不需要请求后台
	if(this.value.length==2){
		//请求市级信息
		$.getJSON(contextPath + 'zone/getCitys/'+this.value,{},function(res){
			if(res.success){
				$.each(res.data,function(index,per){
					//给市下拉框赋值
					citySelect.append($('<option>')
							.val(per.rank).text(per.name));
				});
			}else{
				alert('网络异常,请联系管理员!');
			}
		});
	}
});
$('.city').change(function(){
	var districtSelect = $(this).next();
	districtSelect.find('option:not(.no)').remove();
	if(this.value.length==2){
		//请求市级信息
		$.getJSON(contextPath + 'zone/getDistricts/'+this.value,{},function(res){
			if(res.success){
				$.each(res.data,function(index,per){
					//给市下拉框赋值
					districtSelect.append($('<option>')
							.val(per.rank).text(per.name));
				});
			}else{
				alert('网络异常,请联系管理员!');
			}
		});
	}
});